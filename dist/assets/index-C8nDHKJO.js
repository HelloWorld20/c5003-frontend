import{_ as P,a as R,b as A,N as j}from"./round-add-Be7tstvr.js";import{_ as G,a as L}from"./round-search-r3jNvP4c.js";import{d as O,r as _,bt as T,F as V,ab as q,b as H,f as t,w as o,bY as J,c7 as y,c8 as K,g as p,B as u,h as m,i as d,bd as Q,o as W}from"./index-CfpZo8w-.js";import{f as X,d as Z}from"./employee-tTf44PtV.js";import{_ as ee,a as te}from"./Grid-CVbsF19X.js";import{_ as ae}from"./DatePicker-LgaTArTr.js";import{_ as ne}from"./FormItem-DunN2_bb.js";import{N as oe}from"./Input-DXLRnZtr.js";import{N as le}from"./Select-BixcUewK.js";import{_ as k}from"./Space-72crcGQg.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./get-DZ7P2G-Z.js";import"./Dropdown-hY18M8Tw.js";import"./use-locale-CUGND_E1.js";import"./Popover-CqushPYT.js";import"./Follower-fAuv7w7d.js";import"./use-compitable-DA0_a1mn.js";import"./use-keyboard-C0QpISI4.js";import"./create-C8zW23Rr.js";import"./Tooltip-CXH56mgO.js";import"./get-slot-Bk_rJcZu.js";import"./FocusDetector-DEqc9KJY.js";import"./Forward-BGnG18aJ.js";import"./download-C2161hUv.js";const re={class:"user-management"},se=O({__name:"index",setup(ue){const c=Q(),a=_({emp_no:"",birth_date:null,hire_date:null,name:"",gender:"M"}),f=_([]),i=T({page:1,pageSize:10,"item-count":99}),w=_(!1),N=[{title:"name",key:"name",width:180,render:n=>`${n.first_name} ${n.last_name}`},{title:"emp_no",key:"emp_no",width:100},{title:"birth_date",key:"birth_date",width:140},{title:"dept_name",key:"dept_name",width:180},{title:"title",key:"title",width:180},{title:"salary",key:"salary",width:100,render:n=>`$ ${n.salary}`},{title:"hire_date",key:"hire_date",width:140},{title:"gender",key:"gender",width:120,render:n=>n.gender==="M"?"male":"female"},{title:"Operation",key:"actions",width:150,fixed:"right",render:n=>d(k,{},{default:()=>[d(u,{size:"small",type:"primary",onClick:()=>x(n)},{default:()=>"Edit"}),d(j,{onPositiveClick:()=>z(n)},{trigger:()=>d(u,{size:"small",type:"error"},{default:()=>"Delete"}),default:()=>"Are you sure to delete this employee?"})]})}];function x(n){c.push({path:"employees/detail",query:{emp_no:n.emp_no}})}async function z(n){try{await Z(n.emp_no),s(),window.$message?.success("delete success")}catch(e){window.$message?.error(e||"fail to delete")}}function S(){console.log("搜索条件:",a),s()}function g(){D(),s()}function C(){console.log("新增用户"),c.push("/employees/detail")}function D(){a.value={emp_no:"",birth_date:null,hire_date:null,name:"",gender:""}}function s(){let n={...a.value,...i,birth_date:a.value.birth_date?y(a.value.birth_date).format("YYYY-MM-DD"):void 0,hire_date:a.value.hire_date?y(a.value.hire_date).format("YYYY-MM-DD"):void 0};delete n["item-count"],n=K(n),X(n).then(e=>{f.value=e.data})}return V(()=>{g(),s()}),q(()=>[i.page,i.pageSize,a.value],()=>{s()}),(n,e)=>{const v=oe,r=te,h=ae,M=le,Y=G,$=L,E=ee,U=ne,b=J,F=A,B=P,I=R;return W(),H("div",re,[t(b,{title:"Search Conditions",class:"mb-4"},{default:o(()=>[t(U,{model:a.value,"label-placement":"left","label-width":"80px",class:"search-form"},{default:o(()=>[t(E,{cols:4,"x-gap":16},{default:o(()=>[t(r,{label:"name"},{default:o(()=>[t(v,{value:a.value.name,"onUpdate:value":e[0]||(e[0]=l=>a.value.name=l),clearable:""},null,8,["value"])]),_:1}),t(r,{label:"emp_no"},{default:o(()=>[t(v,{value:a.value.emp_no,"onUpdate:value":e[1]||(e[1]=l=>a.value.emp_no=l),clearable:""},null,8,["value"])]),_:1}),t(r,{label:"birth_date"},{default:o(()=>[t(h,{value:a.value.birth_date,"onUpdate:value":e[2]||(e[2]=l=>a.value.birth_date=l),type:"date",clearable:""},null,8,["value"])]),_:1}),t(r,{label:"hire_date"},{default:o(()=>[t(h,{value:a.value.hire_date,"onUpdate:value":e[3]||(e[3]=l=>a.value.hire_date=l),type:"date",clearable:""},null,8,["value"])]),_:1}),t(r,{label:"gender"},{default:o(()=>[t(M,{value:a.value.gender,"onUpdate:value":e[4]||(e[4]=l=>a.value.gender=l),clearable:"",options:[{label:"Male",value:"M"},{label:"Female",value:"F"}]},null,8,["value"])]),_:1}),t(r,null,{default:o(()=>[t(p(k),null,{default:o(()=>[t(p(u),{type:"primary",onClick:S},{icon:o(()=>[t(Y)]),default:o(()=>[e[7]||(e[7]=m(" Search ",-1))]),_:1}),t(p(u),{onClick:g},{icon:o(()=>[t($)]),default:o(()=>[e[8]||(e[8]=m(" Reset ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(b,{title:"Employee List"},{"header-extra":o(()=>[t(p(u),{type:"primary",onClick:C},{icon:o(()=>[t(F)]),default:o(()=>[e[9]||(e[9]=m(" Add Employee ",-1))]),_:1})]),default:o(()=>[t(B,{columns:N,data:f.value,loading:w.value,bordered:!1,"single-line":!1,class:"user-table"},null,8,["data","loading"]),t(I,{page:i.page,"onUpdate:page":e[5]||(e[5]=l=>i.page=l),"page-size":i.pageSize,"onUpdate:pageSize":e[6]||(e[6]=l=>i.pageSize=l),"item-count":i["item-count"],"page-sizes":[10,20,30,40],"show-size-picker":""},null,8,["page","page-size","item-count"])]),_:1})])}}}),Fe=ie(se,[["__scopeId","data-v-4a989efc"]]);export{Fe as default};
