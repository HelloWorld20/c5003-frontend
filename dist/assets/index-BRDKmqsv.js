import{_ as $,a as B,b as S,N as A}from"./round-add-BPbYZ9dc.js";import{_ as j,a as G}from"./round-search-DFahOh1b.js";import{bY as L,c9 as O,d as V,r as c,bu as q,F as Z,ab as H,b as J,f as t,w as n,bZ as K,cc as y,c7 as Q,g as m,B as u,h as f,i as d,bd as W,o as X}from"./index-87vbCTGm.js";import{_ as ee}from"./FormItem-BHQhvWDD.js";import{_ as te,a as oe}from"./Grid-DQUJjOE4.js";import{N as ne}from"./Input-ClcVpobp.js";import{_ as ae}from"./DatePicker-B-UnU-O6.js";import{_ as N}from"./Space-BIAq3j9v.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./get-BnYSeXiT.js";import"./Dropdown-BdNqHr01.js";import"./use-locale-BXu25IbI.js";import"./Popover-D6ZomGUB.js";import"./Follower-Sc50xzgF.js";import"./use-compitable-CBYToUKY.js";import"./use-keyboard-BUPNGHvA.js";import"./create-C8zW23Rr.js";import"./Tooltip-B9QzuBhL.js";import"./get-slot-Bk_rJcZu.js";import"./FocusDetector-BjQ8OS9e.js";import"./Select-t6ou7y2E.js";import"./Forward-C9o8IRuB.js";import"./download-C2161hUv.js";function re(_){return L("/dept_manager/list",_)}function se(_){return O("/dept_manager/deletion",{Employee_ID:_})}const ie={class:"user-management"},ue=V({__name:"index",setup(_){const g=W(),a=c({Employee_ID:"",Dept_Number:"",Date:null}),D=c([]),r=q({Page_Number:1,Row_Count:10,"item-count":99}),h=c(!1),k=[{title:"emp_no",key:"emp_no"},{title:"dept_no",key:"dept_no"},{title:"from_date",key:"from_date"},{title:"to_date",key:"to_date"},{title:"Operation",key:"actions",width:150,render:o=>d(N,{},{default:()=>[d(u,{size:"small",type:"primary",onClick:()=>w(o)},{default:()=>"Edit"}),d(A,{onPositiveClick:()=>C(o)},{trigger:()=>d(u,{size:"small",type:"error"},{default:()=>"Delete"}),default:()=>"Are you sure to delete this employee?"})]})}];function w(o){console.log("编辑用户:",o),g.push({path:"departments-manager/detail",query:{...o}})}async function C(o){try{await se(o.Employee_ID),s(),window.$message?.success("删除成功")}catch{window.$message?.error("删除失败")}}function x(){console.log("搜索条件:",a),s()}function b(){E(),s()}function I(){console.log("新增用户"),g.push("/departments-manager/detail")}function E(){a.value={Employee_ID:"",Dept_Number:"",Date:null}}function s(){let o={...a.value,...r};if(o.Date){const[e,i]=o.Date;o.From_Date=e?y(e).format("YYYY-MM-DD"):void 0,o.To_Date=i?y(i).format("YYYY-MM-DD"):void 0,delete o.Date}delete o["item-count"],o=Q(o),re(o).then(e=>{D.value=e})}return Z(()=>{b(),s()}),H(()=>[r.Page_Number,r.Row_Count],()=>{s()}),(o,e)=>{const i=ne,p=oe,Y=ae,P=j,R=G,z=te,M=ee,v=K,F=S,T=$,U=B;return X(),J("div",ie,[t(v,{title:"Search Conditions",class:"mb-4"},{default:n(()=>[t(M,{model:a.value,"label-placement":"left","label-width":"80px",class:"search-form"},{default:n(()=>[t(z,{cols:4,"x-gap":16},{default:n(()=>[t(p,{label:"Employee_ID"},{default:n(()=>[t(i,{value:a.value.Employee_ID,"onUpdate:value":e[0]||(e[0]=l=>a.value.Employee_ID=l),clearable:""},null,8,["value"])]),_:1}),t(p,{label:"Dept_Number"},{default:n(()=>[t(i,{value:a.value.Dept_Number,"onUpdate:value":e[1]||(e[1]=l=>a.value.Dept_Number=l),clearable:""},null,8,["value"])]),_:1}),t(p,{label:"Date"},{default:n(()=>[t(Y,{value:a.value.Date,"onUpdate:value":e[2]||(e[2]=l=>a.value.Date=l),type:"daterange",clearable:""},null,8,["value"])]),_:1}),t(p,null,{default:n(()=>[t(m(N),null,{default:n(()=>[t(m(u),{type:"primary",onClick:x},{icon:n(()=>[t(P)]),default:n(()=>[e[5]||(e[5]=f(" Search ",-1))]),_:1}),t(m(u),{onClick:b},{icon:n(()=>[t(R)]),default:n(()=>[e[6]||(e[6]=f(" Reset ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(v,{title:"Department Manager List"},{"header-extra":n(()=>[t(m(u),{type:"primary",onClick:I},{icon:n(()=>[t(F)]),default:n(()=>[e[7]||(e[7]=f(" Add Department Manager ",-1))]),_:1})]),default:n(()=>[t(T,{columns:k,data:D.value,loading:h.value,bordered:!1,"single-line":!1,class:"user-table"},null,8,["data","loading"]),t(U,{page:r.Page_Number,"onUpdate:page":e[3]||(e[3]=l=>r.Page_Number=l),"page-size":r.Row_Count,"onUpdate:pageSize":e[4]||(e[4]=l=>r.Row_Count=l),"item-count":r["item-count"],"page-sizes":[10,20,30,40],"show-size-picker":""},null,8,["page","page-size","item-count"])]),_:1})])}}}),Me=le(ue,[["__scopeId","data-v-b1407d8f"]]);export{Me as default};
