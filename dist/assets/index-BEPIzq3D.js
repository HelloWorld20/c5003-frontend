import{_ as U,N as S}from"./round-add-DLFSrtba.js";import{_ as j,a as G}from"./round-search-tzxKjPJ8.js";import{d as V,r as d,bv as J,a as K,F as L,ab as O,b as q,f as a,w as n,b_ as H,c7 as D,cc as Q,g as r,B as p,h as f,e as g,c3 as W,i as v,be as X,o as Z}from"./index-Fa26LLGJ.js";import{f as ee,d as te}from"./titles-CEEOwoP9.js";import{_ as oe}from"./FormItem-BZKeQ143.js";import{_ as ae,a as ne}from"./Grid-B2FtaVgP.js";import{N as le}from"./Input-CaFfWc_O.js";import{_ as ie}from"./DatePicker-rMn-1Kn0.js";import{_ as P}from"./Space-DmpO1c5Z.js";import{_ as se,a as ue}from"./DataTable-rjo85Lnz.js";import{_ as re}from"./InputNumber-CPlT6_RR.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Popover-OLpDKtti.js";import"./get-D-rsvxxO.js";import"./Follower-YbKMuAEO.js";import"./use-locale-3ZZNx-H2.js";import"./use-compitable-BSzTa9o4.js";import"./get-slot-Bk_rJcZu.js";import"./use-keyboard-DyVeZvMZ.js";import"./FocusDetector-UVToc5yR.js";import"./Forward-Cjyugl_j.js";import"./Dropdown-CxFzKVN2.js";import"./create-C8zW23Rr.js";import"./Tooltip-DtJC1sbC.js";import"./Select-Bmi32fUm.js";import"./download-C2161hUv.js";const _e={class:"user-management"},pe={class:"flex items-center gap-4 mt-4"},ce={class:"flex items-center gap-2"},de=V({__name:"index",setup(fe){const x=X(),l=d({Employee_ID:"",Title:"",Date:null}),m=d([]),t=J({Page_Number:1,Row_Count:10,"item-count":0}),h=d(!1),u=d(1),b=K(()=>{const o=t["item-count"];return o===0?1:Math.ceil(o/t.Row_Count)}),C=[{title:"emp_no",key:"emp_no"},{title:"Title",key:"title"},{title:"from_date",key:"from_date"},{title:"to_date",key:"to_date"},{title:"Operation",key:"actions",width:150,render:o=>v(P,{},{default:()=>[v(S,{onPositiveClick:()=>T(o)},{trigger:()=>v(p,{size:"small",type:"error"},{default:()=>"Delete"}),default:()=>"Are you sure to delete this employee?"})]})}];async function T(o){try{await te(o.emp_no,o.title),_(),window.$message?.success("删除成功")}catch{window.$message?.error("删除失败")}}function k(){console.log("搜索条件:",l),t.Page_Number=1,_()}function w(){I(),_()}function R(){console.log("新增用户"),x.push("/titles/detail")}function y(){const o=u.value;if(!o||o<1){window.$message?.warning("Please enter a valid page number"),u.value=t.Page_Number;return}const e=b.value;if(o>e){window.$message?.warning(`Page number cannot exceed ${e}`),u.value=t.Page_Number;return}t.Page_Number=o}function I(){l.value.Employee_ID="",l.value.Title="",l.value.Date=null}function _(){let o={...l.value,Page_Number:t.Page_Number||1,Row_Count:t.Row_Count||10};if(o.Date){const[e,i]=o.Date;o.From_Date=e?D(e).format("YYYY-MM-DD"):void 0,o.To_Date=i?D(i).format("YYYY-MM-DD"):void 0,delete o.Date}o=Q(o),ee(o).then(e=>{if(Array.isArray(e))if(m.value=e,e.length<t.Row_Count)t["item-count"]=(t.Page_Number-1)*t.Row_Count+e.length;else{const i=Math.max(100,t.Page_Number*t.Row_Count+1);t["item-count"]=i}else if(e&&e.data&&Array.isArray(e.data))if(m.value=e.data,e.total!==void 0)t["item-count"]=e.total;else{const i=Math.max(100,t.Page_Number*t.Row_Count+1);t["item-count"]=i}else m.value=[],t["item-count"]=0}).catch(e=>{console.error("Search error:",e),m.value=[],t["item-count"]=0})}return L(()=>{w(),_()}),O(()=>t.Page_Number,o=>{u.value=o,_()}),(o,e)=>{const i=le,c=ne,M=ie,Y=j,$=G,A=ae,z=oe,N=H,E=U,B=se,F=ue;return Z(),q("div",_e,[a(N,{title:"Search Conditions",class:"mb-4"},{default:n(()=>[a(z,{model:l.value,"label-placement":"left","label-width":"80px",class:"search-form"},{default:n(()=>[a(A,{cols:4,"x-gap":16},{default:n(()=>[a(c,{label:"Employee_ID"},{default:n(()=>[a(i,{value:l.value.Employee_ID,"onUpdate:value":e[0]||(e[0]=s=>l.value.Employee_ID=s),clearable:""},null,8,["value"])]),_:1}),a(c,{label:"Title"},{default:n(()=>[a(i,{value:l.value.Title,"onUpdate:value":e[1]||(e[1]=s=>l.value.Title=s),clearable:""},null,8,["value"])]),_:1}),a(c,{label:"Date"},{default:n(()=>[a(M,{value:l.value.Date,"onUpdate:value":e[2]||(e[2]=s=>l.value.Date=s),type:"daterange",clearable:""},null,8,["value"])]),_:1}),a(c,null,{default:n(()=>[a(r(P),null,{default:n(()=>[a(r(p),{type:"primary",onClick:k},{icon:n(()=>[a(Y)]),default:n(()=>[e[5]||(e[5]=f(" Search ",-1))]),_:1}),a(r(p),{onClick:w},{icon:n(()=>[a($)]),default:n(()=>[e[6]||(e[6]=f(" Reset ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(N,{title:"Title List"},{"header-extra":n(()=>[a(r(p),{type:"primary",onClick:R},{icon:n(()=>[a(E)]),default:n(()=>[e[7]||(e[7]=f(" Add Title ",-1))]),_:1})]),default:n(()=>[a(B,{columns:C,data:m.value,loading:h.value,bordered:!1,"single-line":!1,class:"user-table"},null,8,["data","loading"]),g("div",pe,[a(F,{page:t.Page_Number,"onUpdate:page":e[3]||(e[3]=s=>t.Page_Number=s),"page-size":t.Row_Count,"item-count":t["item-count"],"show-size-picker":!1},null,8,["page","page-size","item-count"]),g("div",ce,[e[9]||(e[9]=g("span",{class:"text-sm"},"Jump to:",-1)),a(r(re),{value:u.value,"onUpdate:value":e[4]||(e[4]=s=>u.value=s),min:1,max:b.value,"show-button":!1,size:"small",style:{width:"80px"},onKeyup:W(y,["enter"])},null,8,["value","max"]),a(r(p),{size:"small",onClick:y},{default:n(()=>[...e[8]||(e[8]=[f("Go",-1)])]),_:1})])])]),_:1})])}}}),Ge=me(de,[["__scopeId","data-v-6a8111c6"]]);export{Ge as default};
