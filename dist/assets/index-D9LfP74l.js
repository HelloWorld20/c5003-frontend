import{_ as U,N as j}from"./round-add-DLFSrtba.js";import{_ as G,a as V}from"./round-search-tzxKjPJ8.js";import{d as J,r as d,bv as K,a as L,F as O,ab as q,b as H,f as o,w as n,b_ as Q,c7 as h,cc as W,g as r,B as m,h as f,e as v,c3 as X,i as g,be as Z,o as ee}from"./index-Fa26LLGJ.js";import{f as te,d as ae}from"./salary-JltmAHa8.js";import{_ as oe}from"./FormItem-BZKeQ143.js";import{_ as ne,a as le}from"./Grid-B2FtaVgP.js";import{N as se}from"./Input-CaFfWc_O.js";import{_ as ue}from"./DatePicker-rMn-1Kn0.js";import{_ as P}from"./Space-DmpO1c5Z.js";import{_ as ie,a as re}from"./DataTable-rjo85Lnz.js";import{_ as me}from"./InputNumber-CPlT6_RR.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Popover-OLpDKtti.js";import"./get-D-rsvxxO.js";import"./Follower-YbKMuAEO.js";import"./use-locale-3ZZNx-H2.js";import"./use-compitable-BSzTa9o4.js";import"./get-slot-Bk_rJcZu.js";import"./use-keyboard-DyVeZvMZ.js";import"./FocusDetector-UVToc5yR.js";import"./Forward-Cjyugl_j.js";import"./Dropdown-CxFzKVN2.js";import"./create-C8zW23Rr.js";import"./Tooltip-DtJC1sbC.js";import"./Select-Bmi32fUm.js";import"./download-C2161hUv.js";const pe={class:"user-management"},ce={class:"flex items-center gap-4 mt-4"},de={class:"flex items-center gap-2"},fe=J({__name:"index",setup(ge){const y=Z(),l=d({Employee_ID:"",Salary:null,Date:null}),_=d([]),a=K({Page_Number:1,Row_Count:10,"item-count":0}),x=d(!1),i=d(1),b=L(()=>{const t=a["item-count"];return t===0?1:Math.ceil(t/a.Row_Count)}),C=[{title:"emp_no",key:"emp_no"},{title:"Salary",key:"salary"},{title:"from_date",key:"from_date"},{title:"to_date",key:"to_date"},{title:"Operation",key:"actions",width:150,render:t=>g(P,{},{default:()=>[g(m,{size:"small",type:"primary",onClick:()=>k(t)},{default:()=>"Edit"}),g(j,{onPositiveClick:()=>S(t)},{trigger:()=>g(m,{size:"small",type:"error"},{default:()=>"Delete"}),default:()=>"Are you sure to delete this employee?"})]})}];function k(t){console.log("编辑用户:",t),y.push({path:"salaries/detail",query:{...t}})}async function S(t){try{await ae(t.Employee_ID),p(),window.$message?.success("删除成功")}catch{window.$message?.error("删除失败")}}function R(){console.log("搜索条件:",l),a.Page_Number=1,p()}function N(){E(),p()}function I(){console.log("新增用户"),y.push("/salaries/detail")}function w(){const t=i.value;if(!t||t<1){window.$message?.warning("Please enter a valid page number"),i.value=a.Page_Number;return}const e=b.value;if(t>e){window.$message?.warning(`Page number cannot exceed ${e}`),i.value=a.Page_Number;return}a.Page_Number=t}function E(){l.value={Employee_ID:"",Salary:null,Date:null}}function p(){let t={...l.value,Page_Number:a.Page_Number||1,Row_Count:a.Row_Count||10};if(t.Date){const[e,s]=t.Date;t.From_Date=e?h(e).format("YYYY-MM-DD"):void 0,t.To_Date=s?h(s).format("YYYY-MM-DD"):void 0,delete t.Date}t=W(t),te(t).then(e=>{if(Array.isArray(e))if(_.value=e,e.length<a.Row_Count)a["item-count"]=(a.Page_Number-1)*a.Row_Count+e.length;else{const s=Math.max(100,a.Page_Number*a.Row_Count+1);a["item-count"]=s}else if(e&&e.data&&Array.isArray(e.data))if(_.value=e.data,e.total!==void 0)a["item-count"]=e.total;else{const s=Math.max(100,a.Page_Number*a.Row_Count+1);a["item-count"]=s}else _.value=[],a["item-count"]=0}).catch(e=>{console.error("Search error:",e),_.value=[],a["item-count"]=0})}return O(()=>{N(),p()}),q(()=>a.Page_Number,t=>{i.value=t,p()}),(t,e)=>{const s=se,c=le,M=ue,T=G,Y=V,$=ne,z=oe,D=Q,A=U,B=ie,F=re;return ee(),H("div",pe,[o(D,{title:"Search Conditions",class:"mb-4"},{default:n(()=>[o(z,{model:l.value,"label-placement":"left","label-width":"80px",class:"search-form"},{default:n(()=>[o($,{cols:4,"x-gap":16},{default:n(()=>[o(c,{label:"Employee_ID"},{default:n(()=>[o(s,{value:l.value.Employee_ID,"onUpdate:value":e[0]||(e[0]=u=>l.value.Employee_ID=u),clearable:""},null,8,["value"])]),_:1}),o(c,{label:"Salary"},{default:n(()=>[o(s,{value:l.value.Salary,"onUpdate:value":e[1]||(e[1]=u=>l.value.Salary=u),clearable:""},null,8,["value"])]),_:1}),o(c,{label:"Date"},{default:n(()=>[o(M,{value:l.value.Date,"onUpdate:value":e[2]||(e[2]=u=>l.value.Date=u),type:"daterange",clearable:""},null,8,["value"])]),_:1}),o(c,null,{default:n(()=>[o(r(P),null,{default:n(()=>[o(r(m),{type:"primary",onClick:R},{icon:n(()=>[o(T)]),default:n(()=>[e[5]||(e[5]=f(" Search ",-1))]),_:1}),o(r(m),{onClick:N},{icon:n(()=>[o(Y)]),default:n(()=>[e[6]||(e[6]=f(" Reset ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(D,{title:"Salary List"},{"header-extra":n(()=>[o(r(m),{type:"primary",onClick:I},{icon:n(()=>[o(A)]),default:n(()=>[e[7]||(e[7]=f(" Add Salary ",-1))]),_:1})]),default:n(()=>[o(B,{columns:C,data:_.value,loading:x.value,bordered:!1,"single-line":!1,class:"user-table"},null,8,["data","loading"]),v("div",ce,[o(F,{page:a.Page_Number,"onUpdate:page":e[3]||(e[3]=u=>a.Page_Number=u),"page-size":a.Row_Count,"item-count":a["item-count"],"show-size-picker":!1},null,8,["page","page-size","item-count"]),v("div",de,[e[9]||(e[9]=v("span",{class:"text-sm"},"Jump to:",-1)),o(r(me),{value:i.value,"onUpdate:value":e[4]||(e[4]=u=>i.value=u),min:1,max:b.value,"show-button":!1,size:"small",style:{width:"80px"},onKeyup:X(w,["enter"])},null,8,["value","max"]),o(r(m),{size:"small",onClick:w},{default:n(()=>[...e[8]||(e[8]=[f("Go",-1)])]),_:1})])])]),_:1})])}}}),Ve=_e(fe,[["__scopeId","data-v-64e9bad6"]]);export{Ve as default};
