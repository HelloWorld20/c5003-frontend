import{d as w,c8 as N,bt as P,bv as B,c7 as d,r as C,b as R,f as o,w as r,g as a,e as O,B as b,h as v,b_ as U,be as V,o as q}from"./index-Fa26LLGJ.js";import{u as E,b as I}from"./department-manage-B2EuzGA4.js";import{_ as S}from"./FormItem-BZKeQ143.js";import{_ as j,a as i}from"./Grid-B2FtaVgP.js";import{N as y}from"./Input-CaFfWc_O.js";import{_ as h}from"./DatePicker-rMn-1Kn0.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./get-D-rsvxxO.js";import"./get-slot-Bk_rJcZu.js";import"./use-locale-3ZZNx-H2.js";import"./use-keyboard-DyVeZvMZ.js";import"./FocusDetector-UVToc5yR.js";import"./Follower-YbKMuAEO.js";import"./Forward-Cjyugl_j.js";const T={class:"p-6"},A={class:"mt-8 flex justify-end space-x-4"},z=w({name:"DepartmentManagerDetail",__name:"detail",setup(G){const D=P(),f=V(),n=N(),{emp_no:m,dept_no:p,from_date:u,to_date:_}=D.query,t=B({emp_no:m||"",dept_no:p||"",from_date:u?d(u).valueOf():null,to_date:_?d(_).valueOf():null}),c=C(),x={emp_no:{required:!0,message:"Please enter employee number",trigger:"blur"},dept_no:{required:!0,message:"Please enter department number",trigger:"blur"},from_date:{required:!0,type:"number",message:"Please select from date",trigger:["blur","change"]}},k=()=>{c.value?.validate(g=>{if(g)console.error("Validation errors:",g),n.error("Please check the form information");else{if(!t.from_date){n.error("Please select from date");return}const e={emp_no:parseInt(t.emp_no),dept_no:t.dept_no,from_date:d(t.from_date).format("YYYY-MM-DD")};t.to_date&&(e.to_date=d(t.to_date).format("YYYY-MM-DD")),m&&p?E(e).then(()=>{n.success("Department manager updated successfully!"),f.push("/departments-manager")}).catch(s=>{console.error("Update error:",s),n.error(s?.message||s?.response?.data?.detail||"Failed to update department manager")}):I(e).then(()=>{n.success("Department manager added successfully!"),f.push("/departments-manager")}).catch(s=>{console.error("Add error:",s),n.error(s?.message||s?.response?.data?.detail||"Failed to add department manager")})}})},M=()=>{c.value?.restoreValidation(),Object.assign(t,{emp_no:m||"",dept_no:p||"",from_date:u?d(u).valueOf():null,to_date:_?d(_).valueOf():null})},Y=()=>{f.push("/departments-manager")};return(g,e)=>(q(),R("div",T,[o(a(U),{title:"Department Information",class:"mx-auto"},{default:r(()=>[o(a(S),{ref_key:"formRef",ref:c,model:t,rules:x,"label-placement":"left","label-width":"120px",class:"space-y-4"},{default:r(()=>[o(a(j),{cols:2,"x-gap":24,"y-gap":16},{default:r(()=>[o(a(i),{label:"Employee Number",path:"emp_no"},{default:r(()=>[o(a(y),{value:t.emp_no,"onUpdate:value":e[0]||(e[0]=l=>t.emp_no=l),placeholder:"Please enter employee number",disabled:!!a(m),class:"w-full"},null,8,["value","disabled"])]),_:1}),o(a(i),{label:"Department Number",path:"dept_no"},{default:r(()=>[o(a(y),{value:t.dept_no,"onUpdate:value":e[1]||(e[1]=l=>t.dept_no=l),placeholder:"Please enter department number",disabled:!!a(p),class:"w-full"},null,8,["value","disabled"])]),_:1}),o(a(i),{label:"From Date",path:"from_date"},{default:r(()=>[o(a(h),{value:t.from_date,"onUpdate:value":e[2]||(e[2]=l=>t.from_date=l),type:"date",placeholder:"Select from date",style:{width:"100%"}},null,8,["value"])]),_:1}),o(a(i),{label:"To Date",path:"to_date"},{default:r(()=>[o(a(h),{value:t.to_date,"onUpdate:value":e[3]||(e[3]=l=>t.to_date=l),type:"date",placeholder:"Select to date (optional, defaults to 9999-01-01)",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),O("div",A,[o(a(b),{onClick:Y},{default:r(()=>[...e[4]||(e[4]=[v("Cancel",-1)])]),_:1}),o(a(b),{type:"info",onClick:M},{default:r(()=>[...e[5]||(e[5]=[v("Reset",-1)])]),_:1}),o(a(b),{type:"primary",onClick:k},{default:r(()=>[...e[6]||(e[6]=[v("Save",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})]))}}),le=F(z,[["__scopeId","data-v-7ab1d27a"]]);export{le as default};
