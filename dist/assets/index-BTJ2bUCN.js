import{_ as j,N as G}from"./round-add-DLFSrtba.js";import{_ as V,a as J}from"./round-search-tzxKjPJ8.js";import{bZ as K,c9 as L,d as O,r as f,bv as q,a as Z,F as H,ab as Q,b as W,f as a,w as n,b_ as X,c7 as P,cc as ee,g as m,B as r,h as g,e as b,c3 as te,i as v,be as oe,o as ae}from"./index-Fa26LLGJ.js";import{_ as ne}from"./FormItem-BZKeQ143.js";import{_ as le,a as se}from"./Grid-B2FtaVgP.js";import{N as ue}from"./Input-CaFfWc_O.js";import{_ as ie}from"./DatePicker-rMn-1Kn0.js";import{_ as x}from"./Space-DmpO1c5Z.js";import{_ as me,a as re}from"./DataTable-rjo85Lnz.js";import{_ as _e}from"./InputNumber-CPlT6_RR.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Popover-OLpDKtti.js";import"./get-D-rsvxxO.js";import"./Follower-YbKMuAEO.js";import"./use-locale-3ZZNx-H2.js";import"./use-compitable-BSzTa9o4.js";import"./get-slot-Bk_rJcZu.js";import"./use-keyboard-DyVeZvMZ.js";import"./FocusDetector-UVToc5yR.js";import"./Forward-Cjyugl_j.js";import"./Dropdown-CxFzKVN2.js";import"./create-C8zW23Rr.js";import"./Tooltip-DtJC1sbC.js";import"./Select-Bmi32fUm.js";import"./download-C2161hUv.js";function ce(c){return K("/dept_emp/list",c)}function de(c){return L("/dept_emp/deletion",{Employee_ID:c})}const fe={class:"user-management"},ge={class:"flex items-center gap-4 mt-4"},ve={class:"flex items-center gap-2"},be=O({__name:"index",setup(c){const y=oe(),l=f({Employee_ID:"",Dept_Number:null,Date:null}),_=f([]),o=q({Page_Number:1,Row_Count:10,"item-count":0}),C=f(!1),i=f(1),N=Z(()=>{const t=o["item-count"];return t===0?1:Math.ceil(t/o.Row_Count)}),k=[{title:"emp_no",key:"emp_no"},{title:"dept_no",key:"dept_no"},{title:"from_date",key:"from_date"},{title:"to_date",key:"to_date"},{title:"Operation",key:"actions",width:150,render:t=>v(x,{},{default:()=>[v(r,{size:"small",type:"primary",onClick:()=>E(t)},{default:()=>"Edit"}),v(G,{onPositiveClick:()=>R(t)},{trigger:()=>v(r,{size:"small",type:"error"},{default:()=>"Delete"}),default:()=>"Are you sure to delete this employee?"})]})}];function E(t){console.log("编辑用户:",t),y.push({path:"departments-employees/detail",query:{...t}})}async function R(t){try{await de(t.Employee_ID),p(),window.$message?.success("delete success")}catch(e){window.$message?.error(e||"fail to delete")}}function I(){console.log("搜索条件:",l),o.Page_Number=1,p()}function D(){T(),p()}function M(){console.log("新增用户"),y.push("/departments-employees/detail")}function w(){const t=i.value;if(!t||t<1){window.$message?.warning("Please enter a valid page number"),i.value=o.Page_Number;return}const e=N.value;if(t>e){window.$message?.warning(`Page number cannot exceed ${e}`),i.value=o.Page_Number;return}o.Page_Number=t}function T(){l.value={Employee_ID:"",Dept_Number:null,Date:null}}function p(){let t={...l.value,Page_Number:o.Page_Number||1,Row_Count:o.Row_Count||10};if(t.Date){const[e,s]=t.Date;t.From_Date=e?P(e).format("YYYY-MM-DD"):void 0,t.To_Date=s?P(s).format("YYYY-MM-DD"):void 0,delete t.Date}t=ee(t),ce(t).then(e=>{if(Array.isArray(e))if(_.value=e,e.length<o.Row_Count)o["item-count"]=(o.Page_Number-1)*o.Row_Count+e.length;else{const s=Math.max(100,o.Page_Number*o.Row_Count+1);o["item-count"]=s}else if(e&&e.data&&Array.isArray(e.data))if(_.value=e.data,e.total!==void 0)o["item-count"]=e.total;else{const s=Math.max(100,o.Page_Number*o.Row_Count+1);o["item-count"]=s}else _.value=[],o["item-count"]=0}).catch(e=>{console.error("Search error:",e),_.value=[],o["item-count"]=0})}return H(()=>{D(),p()}),Q(()=>o.Page_Number,t=>{i.value=t,p()}),(t,e)=>{const s=ue,d=se,Y=ie,$=V,z=J,A=le,B=ne,h=X,F=j,U=me,S=re;return ae(),W("div",fe,[a(h,{title:"Search Conditions",class:"mb-4"},{default:n(()=>[a(B,{model:l.value,"label-placement":"left","label-width":"80px",class:"search-form"},{default:n(()=>[a(A,{cols:4,"x-gap":16},{default:n(()=>[a(d,{label:"Employee_ID"},{default:n(()=>[a(s,{value:l.value.Employee_ID,"onUpdate:value":e[0]||(e[0]=u=>l.value.Employee_ID=u),clearable:""},null,8,["value"])]),_:1}),a(d,{label:"Dept_Number"},{default:n(()=>[a(s,{value:l.value.Dept_Number,"onUpdate:value":e[1]||(e[1]=u=>l.value.Dept_Number=u),clearable:""},null,8,["value"])]),_:1}),a(d,{label:"Date"},{default:n(()=>[a(Y,{value:l.value.Date,"onUpdate:value":e[2]||(e[2]=u=>l.value.Date=u),type:"daterange",clearable:""},null,8,["value"])]),_:1}),a(d,null,{default:n(()=>[a(m(x),null,{default:n(()=>[a(m(r),{type:"primary",onClick:I},{icon:n(()=>[a($)]),default:n(()=>[e[5]||(e[5]=g(" Search ",-1))]),_:1}),a(m(r),{onClick:D},{icon:n(()=>[a(z)]),default:n(()=>[e[6]||(e[6]=g(" Reset ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(h,{title:"Employee List"},{"header-extra":n(()=>[a(m(r),{type:"primary",onClick:M},{icon:n(()=>[a(F)]),default:n(()=>[e[7]||(e[7]=g(" Add Employee ",-1))]),_:1})]),default:n(()=>[a(U,{columns:k,data:_.value,loading:C.value,bordered:!1,"single-line":!1,class:"user-table"},null,8,["data","loading"]),b("div",ge,[a(S,{page:o.Page_Number,"onUpdate:page":e[3]||(e[3]=u=>o.Page_Number=u),"page-size":o.Row_Count,"item-count":o["item-count"],"show-size-picker":!1},null,8,["page","page-size","item-count"]),b("div",ve,[e[9]||(e[9]=b("span",{class:"text-sm"},"Jump to:",-1)),a(m(_e),{value:i.value,"onUpdate:value":e[4]||(e[4]=u=>i.value=u),min:1,max:N.value,"show-button":!1,size:"small",style:{width:"80px"},onKeyup:te(w,["enter"])},null,8,["value","max"]),a(m(r),{size:"small",onClick:w},{default:n(()=>[...e[8]||(e[8]=[g("Go",-1)])]),_:1})])])]),_:1})])}}}),Je=pe(be,[["__scopeId","data-v-220f1603"]]);export{Je as default};
