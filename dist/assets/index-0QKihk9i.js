import{_ as $,a as B,b as S,N as A}from"./round-add-BPbYZ9dc.js";import{_ as j,a as G}from"./round-search-DFahOh1b.js";import{bY as L,c9 as O,d as V,r as c,bu as q,F as Z,ab as H,b as J,f as t,w as n,bZ as K,cc as v,c7 as Q,g as m,B as r,h as f,i as d,bd as W,o as X}from"./index-87vbCTGm.js";import{_ as ee}from"./FormItem-BHQhvWDD.js";import{_ as te,a as oe}from"./Grid-DQUJjOE4.js";import{N as ne}from"./Input-ClcVpobp.js";import{_ as ae}from"./DatePicker-B-UnU-O6.js";import{_ as N}from"./Space-BIAq3j9v.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./get-BnYSeXiT.js";import"./Dropdown-BdNqHr01.js";import"./use-locale-BXu25IbI.js";import"./Popover-D6ZomGUB.js";import"./Follower-Sc50xzgF.js";import"./use-compitable-CBYToUKY.js";import"./use-keyboard-BUPNGHvA.js";import"./create-C8zW23Rr.js";import"./Tooltip-B9QzuBhL.js";import"./get-slot-Bk_rJcZu.js";import"./FocusDetector-BjQ8OS9e.js";import"./Select-t6ou7y2E.js";import"./Forward-C9o8IRuB.js";import"./download-C2161hUv.js";function se(u){return L("/dept_emp/list",u)}function ie(u){return O("/dept_emp/deletion",{Employee_ID:u})}const pe={class:"user-management"},re=V({__name:"index",setup(u){const g=W(),a=c({Employee_ID:"",Dept_Number:null,Date:null}),D=c([]),s=q({Page_Number:1,Row_Count:10,"item-count":99}),h=c(!1),k=[{title:"emp_no",key:"emp_no"},{title:"dept_no",key:"dept_no"},{title:"from_date",key:"from_date"},{title:"to_date",key:"to_date"},{title:"Operation",key:"actions",width:150,render:o=>d(N,{},{default:()=>[d(r,{size:"small",type:"primary",onClick:()=>w(o)},{default:()=>"Edit"}),d(A,{onPositiveClick:()=>C(o)},{trigger:()=>d(r,{size:"small",type:"error"},{default:()=>"Delete"}),default:()=>"Are you sure to delete this employee?"})]})}];function w(o){console.log("编辑用户:",o),g.push({path:"departments-employees/detail",query:{...o}})}async function C(o){try{await ie(o.Employee_ID),i(),window.$message?.success("delete success")}catch(e){window.$message?.error(e||"fail to delete")}}function E(){console.log("搜索条件:",a),i()}function b(){I(),i()}function x(){console.log("新增用户"),g.push("/departments-employees/detail")}function I(){a.value={Employee_ID:"",Dept_Number:null,Date:null}}function i(){let o={...a.value,...s};if(o.Date){const[e,p]=o.Date;o.From_Date=e?v(e).format("YYYY-MM-DD"):void 0,o.To_Date=p?v(p).format("YYYY-MM-DD"):void 0,delete o.Date}delete o["item-count"],o=Q(o),se(o).then(e=>{D.value=e})}return Z(()=>{b(),i()}),H(()=>[s.Page_Number,s.Row_Count],()=>{i()}),(o,e)=>{const p=ne,_=oe,Y=ae,P=j,R=G,z=te,F=ee,y=K,M=S,T=$,U=B;return X(),J("div",pe,[t(y,{title:"Search Conditions",class:"mb-4"},{default:n(()=>[t(F,{model:a.value,"label-placement":"left","label-width":"80px",class:"search-form"},{default:n(()=>[t(z,{cols:4,"x-gap":16},{default:n(()=>[t(_,{label:"Employee_ID"},{default:n(()=>[t(p,{value:a.value.Employee_ID,"onUpdate:value":e[0]||(e[0]=l=>a.value.Employee_ID=l),clearable:""},null,8,["value"])]),_:1}),t(_,{label:"Dept_Number"},{default:n(()=>[t(p,{value:a.value.Dept_Number,"onUpdate:value":e[1]||(e[1]=l=>a.value.Dept_Number=l),clearable:""},null,8,["value"])]),_:1}),t(_,{label:"Date"},{default:n(()=>[t(Y,{value:a.value.Date,"onUpdate:value":e[2]||(e[2]=l=>a.value.Date=l),type:"daterange",clearable:""},null,8,["value"])]),_:1}),t(_,null,{default:n(()=>[t(m(N),null,{default:n(()=>[t(m(r),{type:"primary",onClick:E},{icon:n(()=>[t(P)]),default:n(()=>[e[5]||(e[5]=f(" Search ",-1))]),_:1}),t(m(r),{onClick:b},{icon:n(()=>[t(R)]),default:n(()=>[e[6]||(e[6]=f(" Reset ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(y,{title:"Employee List"},{"header-extra":n(()=>[t(m(r),{type:"primary",onClick:x},{icon:n(()=>[t(M)]),default:n(()=>[e[7]||(e[7]=f(" Add Employee ",-1))]),_:1})]),default:n(()=>[t(T,{columns:k,data:D.value,loading:h.value,bordered:!1,"single-line":!1,class:"user-table"},null,8,["data","loading"]),t(U,{page:s.Page_Number,"onUpdate:page":e[3]||(e[3]=l=>s.Page_Number=l),"page-size":s.Row_Count,"onUpdate:pageSize":e[4]||(e[4]=l=>s.Row_Count=l),"item-count":s["item-count"],"page-sizes":[10,20,30,40],"show-size-picker":""},null,8,["page","page-size","item-count"])]),_:1})])}}}),Fe=le(re,[["__scopeId","data-v-33cc34f3"]]);export{Fe as default};
